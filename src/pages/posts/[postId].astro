---
import Html from "components/Html.astro";
import { data } from "modules/data";
import { getPostImageSrc } from "modules/fs";

export const getStaticPaths = async () => {
  const posts = data.getPosts();
  return posts.map(({ postId }) => ({ params: { postId } }));
};

const { postId } = Astro.params;
const post = data.getPost(postId);
---

<Html>
  {
    post && (
      <>
        <div>
          <img src={getPostImageSrc(post, "medium")} />
        </div>

        <code>
          <pre>{JSON.stringify(post, null, 2)}</pre>
        </code>
      </>
    )
  }
</Html>

<style>
  div {
    width: 100%;
    height: calc(100dvh - 4em - 4em);
    padding: 2em;
  }

  img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
</style>
